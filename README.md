
# yet another yt interface

This library provides an interface for YT which attempts to return data in a similar format to the [Invidious](https://github.com/iv-org/invidious) API while offering the ability to either scrape YT or use the innertube API.

## üõ† basic usage
### Scraping a video page for information
```rust
use yayti::extractors::scrape::video::scrape_video_page;
use yayti::parsers::web::video::{get_title, get_description, get_description_html};
use serde_json::{from_str, Value};

// Scraping a video page yields the same results as fetching a next and a player endpoint from innertube
let Ok(video_page_response) = scrape_video_page("QrGrOK8oZG8", Some("en")).await else { todo!() };
let Ok(next_value) = from_str::<Value>(&video_page_response.next) else { todo!() };
let Ok(player_value) = from_str::<Value>(&video_page_response.player) else { todo!() };

// Both the `player` and `next` responses contain the basic info
let Some(title) = get_title(&next_value) else { todo!() }; 
let Some(description) = get_description(&player_value) else { todo!() };
let Some(description_html) = get_description_html(&next_value) else { todo!() };

println!("title: {}", title);
// Too Many Cooks | Adult Swim
println!("description: {}", description);
// Too Many Cooks
// Watch Full Episodes: http://asw.im/3cyX3a . . .
println!("descriptionHtml:");
println!("{}", description_html);
// Too Many Cooks
// Watch Full Episodes: <a href="http://asw.im/3cyX3a"> . . .
```
### [more examples](./EXAMPLES.md)

## üë©‚Äçüè≠ progress

- [ ] videos
  - [ ] üï∏ web endpoints / scraping
    - [X] basic info _(title, description, description_html, +some more)_
      - [X] can parse publish date from language strings _(requires `parse_languages_to_published` feature)_
        - This uses a JSON map generated by a GH action: [![CI badge](https://github.com/MarmadileManteater/yayti/actions/workflows/download-language-maps.yml/badge.svg)](https://github.com/MarmadileManteater/yayti/actions/workflows/download-language-maps.yml)
  - [ ] üì± android endpoints
      - [X] basic info _(title, description, description_html)_
  - [ ] üì∫ tv endpoints
      - [X] basic info _(title, description, description_html)_
  - [X] deciphering streams _(requires `decipher-streams` feature)_
      - This uses [`boa_engine`](https://github.com/boa-dev/boa) to run the javascript required to decipher stream URLs
- [ ] comments
- [ ] playlists
- [ ] channels
- [ ] search
  
## ‚ùì purpose

I created this to üß†learn more about the way extracting data from YT currently works in some existing projects, [Youtube.js](https://github.com/LuanRT/YouTube.js), [node-ytdl-core](https://github.com/fent/node-ytdl-core), and [Invidious](https://github.com/iv-org/invidious).
